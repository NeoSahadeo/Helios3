import{s as F,o as O,b as R}from"../chunks/scheduler.Ce_0Mfso.js";import{S as V,i as G,g as f,h as k,j as d,a as N,n as T,l as w,d as S,b as i,e as J,f as a,o as K,p as Q,q as H,r as j,u as W,v as X,w as Y,x as Z,y as $,z as ee}from"../chunks/index.lAkhB047.js";import{u as te,n as U}from"../chunks/utils.DpcWp2Zj.js";import{L as se}from"../chunks/loadingSpinner.CJmXyUD3.js";function B(b){let e,n;return e=new se({}),{c(){X(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,o){Z(e,r,o),n=!0},i(r){n||(H(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function ne(b){let e,n,r="Helios 3",o,h,L="Created Neo Sahadeo",_,t,l,m,v,I,x,D="Remember Session?",M,y,q='<input type="checkbox" name="session" id="session" checked=""/> <span class="slider round"></span>',P,g,C,E,z,s=b[0]&&B();return{c(){e=f("div"),n=f("h1"),n.textContent=r,o=k(),h=f("span"),h.textContent=L,_=k(),t=f("form"),l=f("input"),m=k(),v=f("input"),I=k(),x=f("p"),x.textContent=D,M=k(),y=f("label"),y.innerHTML=q,P=k(),g=f("button"),s&&s.c(),this.h()},l(p){e=d(p,"DIV",{class:!0});var c=N(e);n=d(c,"H1",{"data-svelte-h":!0}),T(n)!=="svelte-1hykr1b"&&(n.textContent=r),o=w(c),h=d(c,"SPAN",{"data-svelte-h":!0}),T(h)!=="svelte-1ygn2kx"&&(h.textContent=L),_=w(c),t=d(c,"FORM",{class:!0,id:!0});var u=N(t);l=d(u,"INPUT",{type:!0,name:!0,placeholder:!0}),m=w(u),v=d(u,"INPUT",{type:!0,name:!0,placeholder:!0}),I=w(u),x=d(u,"P",{"data-svelte-h":!0}),T(x)!=="svelte-1uiwtx4"&&(x.textContent=D),M=w(u),y=d(u,"LABEL",{class:!0,"data-svelte-h":!0}),T(y)!=="svelte-19avozm"&&(y.innerHTML=q),P=w(u),g=d(u,"BUTTON",{type:!0});var A=N(g);s&&s.l(A),A.forEach(S),u.forEach(S),c.forEach(S),this.h()},h(){i(l,"type","text"),i(l,"name","username"),i(l,"placeholder","Username"),i(v,"type","password"),i(v,"name","password"),i(v,"placeholder","Password"),i(y,"class","switch"),i(g,"type","submit"),i(t,"class","mt-12"),i(t,"id","login"),i(e,"class","logo login rounded-md shadow-lg")},m(p,c){J(p,e,c),a(e,n),a(e,o),a(e,h),a(e,_),a(e,t),a(t,l),a(t,m),a(t,v),a(t,I),a(t,x),a(t,M),a(t,y),a(t,P),a(t,g),s&&s.m(g,null),b[3](g),C=!0,E||(z=K(t,"submit",Q(b[2])),E=!0)},p(p,[c]){p[0]?s?c&1&&H(s,1):(s=B(),s.c(),H(s,1),s.m(g,null)):s&&(ee(),j(s,1,1,()=>{s=null}),W())},i(p){C||(H(s),C=!0)},o(p){j(s),C=!1},d(p){p&&S(e),s&&s.d(),b[3](null),E=!1,z()}}}function oe(b,e,n){let r=!1,o;O(()=>{n(1,o.innerHTML="Log In",o)});async function h(_){o.classList.add("disabled"),n(1,o.innerHTML="",o),n(0,r=!0);const t=new FormData(_.target);try{const l=await fetch(te("api")+"login",{method:"post",body:t});if(l.ok){const m=await l.json();m.error&&U.send({message:m.error,type:"error"}),m.token&&(U.send({message:"Login Successful",type:"success"}),t.get("session")==="on"?localStorage.setItem("helios3token",m.token):sessionStorage.setItem("helios3token",m.token),setTimeout(()=>{window.location.href="home"},500))}}catch(l){U.send({message:"Error contacting server",type:"error"}),console.error(l)}o.classList.remove("disabled"),n(1,o.innerHTML="Log In",o),n(0,r=!1)}function L(_){R[_?"unshift":"push"](()=>{o=_,n(1,o)})}return[r,o,h,L]}class ce extends V{constructor(e){super(),G(this,e,oe,ne,F,{})}}export{ce as component};
