import{s as b,n as u,o as C}from"../chunks/scheduler.CtbWrGNo.js";import{S,i as I,e as c,s as y,b as d,f as j,y as f,g as k,d as x,o as w,a as H,h as l,z as M,A}from"../chunks/index.D3NU-Y99.js";import{w as D}from"../chunks/index.BjqbIcNX.js";async function L(n){try{const e=await fetch("https://neosahadeo.pythonanywhere.com/passwords",{headers:{Authorization:`Token ${n}`}});if(e.ok){const t=await e.json();return t.error?void 0:t}}catch(e){console.log(e)}}const P=D("");function T(n){let e,t,a="Helios 3",h,r,g="Created Neo Sahadeo",p,o,v='<input type="text" name="username" placeholder="Username"/> <input type="password" name="password" placeholder="Password"/> <p>Remember Session?</p> <label class="switch"><input type="checkbox" name="session" id="session" checked=""/> <span class="slider round"></span></label> <input type="submit" value="Log In"/>',m,_;return{c(){e=c("div"),t=c("h1"),t.textContent=a,h=y(),r=c("span"),r.textContent=g,p=y(),o=c("form"),o.innerHTML=v,this.h()},l(i){e=d(i,"DIV",{class:!0});var s=j(e);t=d(s,"H1",{"data-svelte-h":!0}),f(t)!=="svelte-v46f9k"&&(t.textContent=a),h=k(s),r=d(s,"SPAN",{"data-svelte-h":!0}),f(r)!=="svelte-1li5tu8"&&(r.textContent=g),p=k(s),o=d(s,"FORM",{class:!0,id:!0,"data-svelte-h":!0}),f(o)!=="svelte-i87w0r"&&(o.innerHTML=v),s.forEach(x),this.h()},h(){w(o,"class","mt-12"),w(o,"id","login"),w(e,"class","logo rounded-md shadow-lg")},m(i,s){H(i,e,s),l(e,t),l(e,h),l(e,r),l(e,p),l(e,o),m||(_=M(o,"submit",A($)),m=!0)},p:u,i:u,o:u,d(i){i&&x(e),m=!1,_()}}}async function $(n){const e=new FormData(n.target),t=await fetch("https://neosahadeo.pythonanywhere.com/login",{method:"post",body:e});if(t.ok){const a=await t.json();console.log(a.token),a.token&&(localStorage.setItem("helios3token",a.token),window.location.href="home")}}function z(n){return C(async()=>{const e=localStorage.getItem("helios3token");if(e){if(!await L(e)){localStorage.removeItem("helios3token");return}P.set(!0),window.location.href="home"}}),[]}class q extends S{constructor(e){super(),I(this,e,z,T,b,{})}}export{q as component};
